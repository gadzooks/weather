%table.table.table-bordered.table-sm.weather-forecast
  %thead{id: loc.description}
    %tr
      %th{scope: 'col', colspan: 7, class: 'header-main center'}
        %span{title: detail.daily_summary}
          =loc.description.upcase
          =link_to '(top)', :anchor => 'top'
    %tr.header-secondary
      %td{scope: "col", colspan: 2, class: 'center'} DATE
      %td{scope: "col", colspan: 2, class: :center} DESC
      %td{scope: "col", class: 'fahrenheit'} HI / LOW
      %td{scope: "col"} PRECIP
      %td{scope: "col"} CLOUD COVER

  %tbody
    / current daily weather
    - daily_times.each do |time|
      - css_row_classes = add_weekend_class(time, 'weather-details')
      %tr{class: css_row_classes}
        %td.left-col-of-merged-cells
          %span.day-of-week
            =time.strftime('%a').upcase
        %td.right-col-of-merged-cells
          %span.day-of-month
            =time.strftime('%b %d').upcase
        / FIXME move a lot of this to helper code
        - daily_ts = detail.daily(time)
        %td.precipitation.left-col-of-merged-cells
          %i{class: icon_class(daily_ts.icon, daily_ts.precipProbability), title: daily_ts.summary}
        %td.right-col-of-merged-cells
          =daily_ts.desc.gsub(/-/,' ').titleize
        %td.center=daily_ts.temperatureHigh.round.to_s + '° / ' +  daily_ts.temperatureLow.round.to_s + '°'
        %td.center
          =precipitation(daily_ts.precipProbability)
        %td.center
          =daily_ts.cloudCover.to_s + '%'
    %tr.daily-summary
      %td.center{scope: 'col', colspan: 7}
        =detail.daily_summary
